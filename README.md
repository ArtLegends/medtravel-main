# MedTravel ‚Äî Digital Platform for Medical Tourism

[![Next.js](https://img.shields.io/badge/Next.js-15.3.1-black)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-18.3.1-blue)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.6.3-blue)](https://www.typescriptlang.org/)
[![HeroUI](https://img.shields.io/badge/HeroUI-2.7.10-purple)](https://heroui.com/)
[![Supabase](https://img.shields.io/badge/Supabase-Latest-green)](https://supabase.com/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.4.16-cyan)](https://tailwindcss.com/)

MedTravel ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ü–∏—Ñ—Ä–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Ç—É—Ä–∏–∑–º–∞, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∏ –∫–ª–∏–Ω–∏–∫–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É. –ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–µ—Ä–µ–¥–æ–≤–æ–º —Å—Ç–µ–∫–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π (Next.js 15, Supabase) –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª–∏–Ω–∏–∫, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å–ª—É–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –ª–µ—á–µ–Ω–∏—è.

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **üöÄ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫**: Next.js 15 (App Router), React 18, TypeScript.
- **üé® –ü—Ä–µ–º–∏—É–º UI**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –±–∞–∑–µ HeroUI —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π —Ç–µ–º–æ–π –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å—é.
- **üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Supabase Auth —Å —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª—å—é (Admin, Customer/Clinic, Patient) –∏ RLS (Row Level Security).
- **üåç –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞**:
  - **–ü—É–±–ª–∏—á–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥**: –ü–æ–∏—Å–∫ –∫–ª–∏–Ω–∏–∫, —É—Å–ª—É–≥, –æ—Ç–∑—ã–≤—ã.
  - **Customer Panel (–ö–∞–±–∏–Ω–µ—Ç –∫–ª–∏–Ω–∏–∫–∏)**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏, –ø—Ä–æ—Ñ–∏–ª–µ–º –∫–ª–∏–Ω–∏–∫–∏, –æ—Ç–∑—ã–≤–∞–º–∏ –∏ –æ—Ç—á–µ—Ç–∞–º–∏.
  - **Admin Panel**: –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–ª–∏–Ω–∏–∫, –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º.
- **‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: SSR, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö](#-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
5. [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ú–æ–¥—É–ª–∏](#-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-–º–æ–¥—É–ª–∏)
6. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ó–∞–ø—É—Å–∫](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
7. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫

### Frontend
- **Framework**: Next.js 15.3.1 (App Router)
- **Language**: TypeScript 5.6
- **UI Library**: HeroUI (NextUI) v2.7
- **Styling**: Tailwind CSS 3.4 + Tailwind Variants
- **Icons**: Iconify, Lucide React
- **Forms**: React Hook Form + Zod Validation
- **I18n**: i18next + react-i18next (EN, ES, RU)

### Backend & Data
- **Database**: PostgreSQL (via Supabase)
- **Auth**: Supabase Auth
- **API**: Server Actions, Supabase Client (SSR & Browser)
- **Real-time**: Supabase Realtime (WebSockets)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–∏–±—Ä–∏–¥–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å Server Components –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ Client Components –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

### –†–æ–ª–µ–≤–∞—è –ú–æ–¥–µ–ª—å
–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- **Patient (–ü–∞—Ü–∏–µ–Ω—Ç)**: –ò—â–µ—Ç –∫–ª–∏–Ω–∏–∫–∏, –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞—è–≤–∫–∏ –∏ –æ—Ç–∑—ã–≤—ã.
- **Customer (–ö–ª–∏–Ω–∏–∫–∞)**: –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª–µ–º –∫–ª–∏–Ω–∏–∫–∏, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞—è–≤–∫–∏ (`/customer`).
- **Partner (–ü–∞—Ä—Ç–Ω–µ—Ä)**: –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –∫–∞–±–∏–Ω–µ—Ç (`/partner`).
- **Admin (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)**: –ú–æ–¥–µ—Ä–∏—Ä—É–µ—Ç –∫–ª–∏–Ω–∏–∫–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç (`/admin`).

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (RLS)
–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL RLS):
- –ö–ª–∏–Ω–∏–∫–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞—è–≤–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ.
- –ü—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º (–∏–ª–∏ —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ).
- –ê–¥–º–∏–Ω—ã –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

```
frontend/
‚îú‚îÄ‚îÄ üìÅ app/                     # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ (admin)/            # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (Role: ADMIN)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ admin/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ clinics/        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–Ω–∏–∫–∞–º–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ moderation/     # –ú–æ–¥–µ—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÅ users/          # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ (auth)/             # –°—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ (customer)/         # –ö–∞–±–∏–Ω–µ—Ç –∫–ª–∏–Ω–∏–∫–∏ (Role: CUSTOMER)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ customer/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ bookings/       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ clinic-profile/ # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∫–ª–∏–Ω–∏–∫–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ patients/       # –ë–∞–∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ reports/        # –ñ–∞–ª–æ–±—ã –∏ –æ—Ç—á–µ—Ç—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ reviews/        # –ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÅ transactions/   # –§–∏–Ω–∞–Ω—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ (partner)/          # –ö–∞–±–∏–Ω–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (Role: PARTNER)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ partner/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ (site)/             # –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ö–∞—Ç–∞–ª–æ–≥, –õ–µ–Ω–¥–∏–Ω–≥)
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ layout.tsx          # Root Layout
‚îú‚îÄ‚îÄ üìÅ components/             # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ clinic/             # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∫–ª–∏–Ω–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ ui/                 # –ë–∞–∑–æ–≤—ã–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ shared/             # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ üìÅ lib/                    # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ supabase/           # –ö–ª–∏–µ–Ω—Ç—ã Supabase (Server/Client)
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ utils.ts            # –•–µ–ª–ø–µ—Ä—ã
‚îú‚îÄ‚îÄ üìÅ types/                  # TypeScript —Ç–∏–ø—ã
‚îî‚îÄ‚îÄ üìÑ middleware.ts           # –ó–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤ –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã
```

---

## üóÑ –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö

–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –≤ Supabase:

- **`clinics`**: –ü—Ä–æ—Ñ–∏–ª–∏ –∫–ª–∏–Ω–∏–∫ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–¥—Ä–µ—Å, –æ–ø–∏—Å–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å –º–æ–¥–µ—Ä–∞—Ü–∏–∏).
- **`bookings`**: –ó–∞—è–≤–∫–∏ –Ω–∞ –ª–µ—á–µ–Ω–∏–µ (—Å–≤—è–∑—å –ø–∞—Ü–∏–µ–Ω—Ç-–∫–ª–∏–Ω–∏–∫–∞).
- **`reviews`**: –û—Ç–∑—ã–≤—ã –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ (—Å –ø—Ä–µ–º–æ–¥–µ—Ä–∞—Ü–∏–µ–π –∫–ª–∏–Ω–∏–∫–∏).
- **`clinic_reports`**: –ñ–∞–ª–æ–±—ã/—Ä–µ–ø–æ—Ä—Ç—ã –Ω–∞ –∫–ª–∏–Ω–∏–∫–∏.
- **`services`**: –£—Å–ª—É–≥–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–µ –∫–ª–∏–Ω–∏–∫–∞–º–∏.

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è SQL Views (–Ω–∞–ø—Ä–∏–º–µ—Ä, `v_customer_bookings`) –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –∞–¥–º–∏–Ω–∫–∞—Ö –∏ –∫–∞–±–∏–Ω–µ—Ç–∞—Ö.

---

## üß© –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ú–æ–¥—É–ª–∏

### Customer Panel (–ö–∞–±–∏–Ω–µ—Ç –ö–ª–∏–Ω–∏–∫–∏)
–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `/customer`. –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **Dashboard**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞—è–≤–∫–∞–º –∏ –æ—Ç–∑—ã–≤–∞–º.
- **Bookings**: –¢–∞–±–ª–∏—Ü–∞ –∑–∞—è–≤–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, —Å–º–µ–Ω–æ–π —Å—Ç–∞—Ç—É—Å–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º.
- **Reviews**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏ (–ø—É–±–ª–∏–∫–∞—Ü–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ).
- **Clinic Profile**: –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –∫–ª–∏–Ω–∏–∫–µ (–í—Ä–∞—á–∏, –£—Å–ª—É–≥–∏, –ì–∞–ª–µ—Ä–µ—è).

### Admin Panel
–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `/admin`.
- –ú–æ–¥–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–ª–∏–Ω–∏–∫ (`pending` -> `approved`).
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ó–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- Yarn –∏–ª–∏ NPM
- –ê–∫–∫–∞—É–Ω—Ç Supabase (–¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/your-repo/medtravel.git
cd medtravel
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
yarn install
# –∏–ª–∏
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–∏ Supabase:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

### 4. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
yarn dev
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:3000`.

---

## üíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `yarn dev` ‚Äî –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞.
- `yarn build` ‚Äî –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.
- `yarn start` ‚Äî –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- `yarn lint` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º.

### –ö–æ–¥–æ–≤—ã–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Server Actions** –¥–ª—è –º—É—Ç–∞—Ü–∏–π –¥–∞–Ω–Ω—ã—Ö.
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ, –¥–æ–±–∞–≤–ª—è–π—Ç–µ `'use client'` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (—Ö—É–∫–∏, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å).
- –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Tailwind Utility Classes.

---

## ü§ù Contribution

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Pull Requests –∏ –æ–ø–∏—Å—ã–≤–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

1. –§–æ—Ä–∫–Ω–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç.
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è —Ñ–∏—á–∏ (`git checkout -b feature/amazing-feature`).
3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`).
4. –ó–∞–ø—É—à—å—Ç–µ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`).
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request.

-------------------------------------------------

–ø—Ä–∏–≤–µ—Ç. –ø—Ä–æ—à–ª—ã–π —á–∞—Ç –≥–¥–µ –º—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç —Å—Ç–∞–ª —Å–∏–ª—å–Ω–æ –±–æ–ª—å—à–∏–º –∏ –ø–æ—ç—Ç–æ–º—É –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –Ω–æ–≤—ã–π —á–∞—Ç. –≤ –ø—Ä–æ—à–ª–æ–º —á–∞—Ç–µ —è –ø–æ–ø—Ä–æ—Å–∏–ª —Å–¥–µ–ª–∞—Ç—å –æ—Ç—á–µ—Ç –≤ —Ü–µ–ª–æ–º –æ –ø—Ä–æ–µ–∫—Ç–µ –∏ –æ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ø–æ—ç—Ç–æ–º—É —Å–Ω–∞—á–∞–ª–∞ –∏–∑—É—á–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥—Ä–æ–±–Ω–æ –æ—Ç—á–µ—Ç, –Ω–µ —Ç–æ—Ä–æ–ø–∏—Å—å, –∞ —É–∂–µ –ø–æ—Ç–æ–º –±—É–¥–µ–º –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å.

–ù–∏–∂–µ ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ MedTravel, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Ü–µ–ª–∏–∫–æ–º –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –Ω–æ–≤—ã–π —á–∞—Ç, —á—Ç–æ–±—ã –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å—Ä–∞–∑—É –ø–æ–Ω—è–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç, —Å—Ç–µ–∫, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –∏ —á—Ç–æ –¥–µ–ª–∞–µ–º –¥–∞–ª—å—à–µ.

–û—Ç—á—ë—Ç –ø–æ –ø—Ä–æ–µ–∫—Ç—É MedTravel (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
1) –ß—Ç–æ –∑–∞ —Å–µ—Ä–≤–∏—Å –∏ –¥–ª—è –∫–æ–≥–æ
MedTravel ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Ç—É—Ä–∏–∑–º–∞. –¶–µ–ª—å: —Å–æ–µ–¥–∏–Ω—è—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å –∫–ª–∏–Ω–∏–∫–∞–º–∏, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Å–ª—É–≥–∏/—Ü–µ–Ω—ã, –¥–∞–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∞—Ç—å—Å—è/–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É, –∞ –∫–ª–∏–Ω–∏–∫–∞–º ‚Äî –≤–µ—Å—Ç–∏ –ø—Ä–æ—Å—Ç—É—é ‚Äú–º–∏–Ω–∏-CRM‚Äù –ø–æ –ø–∞—Ü–∏–µ–Ω—Ç—Å–∫–∏–º –æ–±—Ä–∞—â–µ–Ω–∏—è–º –∏ –∑–∞–ø–∏—Å—è–º.
–û—Å–Ω–æ–≤–Ω—ã–µ –∞—É–¥–∏—Ç–æ—Ä–∏–∏:
–ü–∞—Ü–∏–µ–Ω—Ç—ã (Patient Panel): –≤—ã–±–∏—Ä–∞—é—Ç –∫–ª–∏–Ω–∏–∫—É/—É—Å–ª—É–≥—É, —Å–æ–∑–¥–∞—é—Ç –∑–∞–ø–∏—Å—å (booking), –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞—é—Ç —Ñ–∞–π–ª—ã (—Ä–µ–Ω—Ç–≥–µ–Ω/—Ñ–æ—Ç–æ), –≤–∏–¥—è—Ç —Å—Ç–∞—Ç—É—Å –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è.
–ü–∞—Ä—Ç–Ω–µ—Ä—ã (Partner Panel): –≤—ã–±–∏—Ä–∞—é—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É, –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –∞–¥–º–∏–Ω–∞ –ø–æ–ª—É—á–∞—é—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É, –ø–æ –∫–æ—Ç–æ—Ä–æ–π –ø–∞—Ü–∏–µ–Ω—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∏ —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞.
–ö–ª–∏–Ω–∏–∫–∏ (Customer Panel): –≤–∏–¥—è—Ç —Å–ø–∏—Å–æ–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤/–∑–∞–ø–∏—Å–µ–π, —Å—Ç–∞—Ç—É—Å—ã, —Å—Ç–æ–∏–º–æ—Å—Ç—å, –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –º–æ–≥—É—Ç –Ω–∞–∑–Ω–∞—á–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –≤–∏–∑–∏—Ç–∞, –º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å (–≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–∞–≤–∏–ª).
–ê–¥–º–∏–Ω/–º–æ–¥–µ—Ä–∞—Ü–∏—è (Admin Panel): —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–Ω–∏–∫–∞–º–∏/–∫–æ–Ω—Ç–µ–Ω—Ç–æ–º/–∑–∞—è–≤–∫–∞–º–∏ –∏ —Ç.–ø. (–≤ –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–µ—Ç–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –¥–æ—Å—Ç—É–ø—É).

2) –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
Frontend / Web
Next.js 15 (App Router), SSR/RSC + Client Components –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
TypeScript
TailwindCSS (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ + —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã)
UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: —á–∞—Å—Ç–∏—á–Ω–æ shadcn/ui (Button/Input/Dialog/Accordion), —á–∞—Å—Ç–∏—á–Ω–æ HeroUI (–ø–æ–¥–∫–ª—é—á–∞–ª–∏/–ø—Ä–æ–±–æ–≤–∞–ª–∏; –≤–∞–∂–Ω–æ –Ω–µ –ª–æ–º–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã).
Backend / Data
Supabase:
Postgres (—Ç–∞–±–ª–∏—Ü—ã, view, —Ñ—É–Ω–∫—Ü–∏–∏/RPC)
Supabase Auth (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
Storage (—Ñ–∞–π–ª—ã –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤: xray/photo)
RLS + SECURITY DEFINER —Ñ—É–Ω–∫—Ü–∏–∏
–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ: supabase.rpc(...), supabase.from(view).select(...), –∞ —Ç–∞–∫–∂–µ Next.js API routes.
–î–µ–ø–ª–æ–π
Vercel (production build)
Supabase –∫–∞–∫ –±—ç–∫–µ–Ω–¥ (DB + Storage)

3) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (App Router)
–ö–æ—Ä–Ω–µ–≤–æ–π layout
app/layout.tsx ‚Äî –æ–±—â–∏–π RootLayout:
–ø–æ–¥–∫–ª—é—á–∞–µ—Ç globals.css
SupabaseProvider (session)
ThemeRoot
–æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤—Å—ë –≤ AppChrome, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ Navbar/Footer.
AppChrome
components/layout/AppChrome.tsx (client):
–ø–æ pathname —Å–∫—Ä—ã–≤–∞–µ—Ç Navbar/Footer –¥–ª—è /admin, /auth, /login.
—Ç–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞: —Ç–∞–∫–∂–µ —Å–∫—Ä—ã—Ç—å —Ö–µ–¥–µ—Ä/—Ñ—É—Ç–µ—Ä –¥–ª—è –ª–µ–Ω–¥–∏–Ω–≥–∞ /ru/hair-transplant/lp (—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —É—Å–ª–æ–≤–∏–µ –≤ AppChrome, –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ root layout).

4) –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –ø–∞–Ω–µ–ª–µ–π
–†–æ–ª–∏ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ:
PATIENT ‚Äî –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ü–∏–µ–Ω—Ç–∞ (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ app/(patient)/patient/...)
CUSTOMER ‚Äî –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–Ω–∏–∫–∏ (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ app/(customer)/customer/...)
PARTNER ‚Äî –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ü–∏–µ–Ω—Ç–∞ (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ app/(partner)/partner/...)
ADMIN ‚Äî –∞–¥–º–∏–Ω–∫–∞
–î–æ—Å—Ç—É–ø—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç—Å—è:
Supabase Auth user
(—á–∞—Å—Ç–∏—á–Ω–æ) RLS –∏ SECURITY DEFINER —Ñ—É–Ω–∫—Ü–∏–∏
–°–∫—Ä—ã—Ç–∏–µ/–¥–æ—Å—Ç—É–ø –∫ —Ä–æ—É—Ç–∞–º –Ω–∞ —É—Ä–æ–≤–Ω–µ Next.js (—Ä–µ–¥–∏—Ä–µ–∫—Ç—ã, –ø—Ä–æ–≤–µ—Ä–∫–∏ user session)

5) –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –∫–ª—é—á–µ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å patient_bookings
–¢–∞–±–ª–∏—Ü–∞ public.patient_bookings
–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è (–≤–∞–∂–Ω–æ–µ):
id uuid ‚Äî booking_id
patient_id uuid, clinic_id uuid, service_id int
status text: pending | confirmed | cancelled | cancelled_by_patient | completed
preferred_date date, preferred_time text ‚Äî —á—Ç–æ —É–∫–∞–∑–∞–ª –ø–∞—Ü–∏–µ–Ω—Ç
scheduled_at timestamptz ‚Äî —á—Ç–æ –Ω–∞–∑–Ω–∞—á–∏–ª–∞ –∫–ª–∏–Ω–∏–∫–∞
schedule_set_by uuid, schedule_set_at timestamptz ‚Äî –∫—Ç–æ/–∫–æ–≥–¥–∞ –Ω–∞–∑–Ω–∞—á–∏–ª
pre_cost numeric, currency text, actual_cost numeric
xray_path text, photo_path text ‚Äî –ø—É—Ç–∏ –≤ Supabase Storage
–∏–Ω–¥–µ–∫—Å—ã –ø–æ scheduled_at, patient_id, clinic_id, status, created_at
–õ–æ–≥–∏–∫–∞: –ø–∞—Ü–∏–µ–Ω—Ç –∑–∞–¥–∞—ë—Ç preferred, –∫–ª–∏–Ω–∏–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç/–º–µ–Ω—è–µ—Ç –∏ –ø–∏—à–µ—Ç scheduled_at.

6) VIEW –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è: v_customer_patients
public.v_customer_patients ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π ‚Äúread model‚Äù –¥–ª—è —Å–ø–∏—Å–∫–æ–≤:
—Å–æ–¥–µ—Ä–∂–∏—Ç booking_id, clinic_id, patient_id, patient_public_id (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ dense_rank)
patient_name/phone, service_name
status, booking_method, preferred_date, preferred_time, scheduled_at
—Ü–µ–Ω—ã pre_cost, currency, actual_cost
xray_path, photo_path
clinic_name
–≠—Ç–∞ –≤—å—é—Ö–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
–≤ –∫–∞–±–∏–Ω–µ—Ç–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ (/patient/bookings)
–≤ –∫–∞–±–∏–Ω–µ—Ç–µ –∫–ª–∏–Ω–∏–∫–∏ (—Å–ø–∏—Å–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∏ —Ñ–∏–ª—å—Ç—Ä—ã)
–í–∞–∂–Ω–æ: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–æ–Ω–æ–∫ view –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ ‚Äú–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å‚Äù –∫–æ–ª–æ–Ω–∫–∏ —á–µ—Ä–µ–∑ CREATE OR REPLACE –±–µ–∑ ALTER ‚Äî –±—ã–ª–∏ –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞:
cannot change name of view column "created_at" to "scheduled_at" –†–µ—à–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º view –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –æ–±—Ä–∞–∑–æ–º (–∫–æ–ª–æ–Ω–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ).

7) RPC —Ñ—É–Ω–∫—Ü–∏–∏ (Postgres)
7.1 –°–ø–∏—Å–æ–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –∫–ª–∏–Ω–∏–∫–∏
public.customer_patients_list(...)
–ø–∞—Ä–∞–º–µ—Ç—Ä—ã: p_status, p_start_date, p_end_date, p_limit, p_offset
–∏—Å—Ç–æ—á–Ω–∏–∫: v_customer_patients
—Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª–∏–Ω–∏–∫–µ —á–µ—Ä–µ–∑ customer_current_clinic_id()
–ø–æ–¥–¥–µ—Ä–∂–∫–∞ total_count: count(*) over() as total_count
—Å—Ç–∞—Ç—É—Å: —É–º–µ–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å cancelled/cancelled_by_patient –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–µ cancelled
–ª–∏–º–∏—Ç clamp 1..50
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Next route: app/api/customer/patients/route.ts (GET)
7.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–Ω–∏–∫–æ–π
customer_patient_update_status(p_booking_id, p_status) (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ø—Ä–æ–µ–∫—Ç–µ) –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: app/api/customer/patients/[id]/route.ts (PATCH/POST)
7.3 –£–¥–∞–ª–µ–Ω–∏–µ
customer_patient_delete_one(p_booking_id)
customer_patients_delete_all(...) –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: app/api/customer/patients/[id]/route.ts (DELETE) app/api/customer/patients/route.ts (DELETE)
7.4 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∫–ª–∏–Ω–∏–∫–æ–π
–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–∏–¥–∞: public.customer_patient_set_schedule(p_booking_id, p_scheduled_at)
–ø–∏—à–µ—Ç scheduled_at, schedule_set_by, schedule_set_at
–¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ SECURITY DEFINER / RLS-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –ø–æ–¥—Ö–æ–¥
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: app/api/customer/patients/[id]/schedule/route.ts (PATCH)
–ù–∞ —ç—Ç–∞–ø–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –±—ã–ª–∞ –æ—à–∏–±–∫–∞:
Could not find the function ... in the schema cache –†–µ—à–µ–Ω–∏–µ: –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é/–æ–±–Ω–æ–≤–∏—Ç—å, —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∏–º—è/–ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç, –∏ —á—Ç–æ Supabase schema cache –æ–±–Ω–æ–≤–∏–ª—Å—è (–ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ).

8) Storage: —Ñ–∞–π–ª—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞ (—Ä–µ–Ω—Ç–≥–µ–Ω/—Ñ–æ—Ç–æ)
–ü—É—Ç–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ patient_bookings.xray_path / photo_path.
–î–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Next API endpoints:
app/api/customer/patients/[id]/xray-url/route.ts
app/api/customer/patients/[id]/photo-url/route.ts
–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:
–ø—Ä–æ–≤–µ—Ä—è—é—Ç –¥–æ—Å—Ç—É–ø –∫–ª–∏–Ω–∏–∫–∏ –∫ booking
–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç signed URL Supabase Storage (/storage/v1/object/sign/...)
–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç { url }
–°–Ω–∞—á–∞–ª–∞ –±—ã–ª–∞ –æ—à–∏–±–∫–∞ 403 –Ω–∞ –∑–∞–ø—Ä–æ—Å signed url, –ø–æ—Ç–æ–º –∏—Å–ø—Ä–∞–≤–∏–ª–∏ routes –∏ –¥–æ—Å—Ç—É–ø.
–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ:
–∫–Ω–æ–ø–∫–∞ View attachment –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–∞ (–±–µ–∑ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞), –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.
–∑–∞–∫—Ä—ã—Ç–∏–µ: –∫—Ä–µ—Å—Ç–∏–∫, ESC, –∫–ª–∏–∫ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ.

9) UI Customer Panel: —Å–ø–∏—Å–æ–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∫–ª–∏–Ω–∏–∫–∏
–§–∞–π–ª: components/customer/PatientsListClient.tsx
–ø–∞–≥–∏–Ω–∞—Ü–∏—è
—Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É, date range
realtime –ø–æ–¥–ø–∏—Å–∫–∞ Supabase channel –Ω–∞ patient_bookings (postgres_changes)
—Ç–∞–±–ª–∏—Ü–∞: patient_id, name, phone, treatment, preferred, scheduled, status, costs, actions
actions:
Schedule (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç PATCH /schedule)
View attachment (–º–æ–¥–∞–ª–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º)
Delete
—Å—Ç–∞—Ç—É—Å ‚Äúcancelled_by_patient‚Äù –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∫–ª–∏–Ω–∏–∫–æ–π (—Å–µ–ª–µ–∫—Ç disabled) ‚Äî —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–∞–∂–Ω–æ.
–¢–∞–∫–∂–µ —Ä–∞–Ω–µ–µ –±—ã–ª –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã –ø–∞—Ü–∏–µ–Ω—Ç–æ–º —É –∫–ª–∏–Ω–∏–∫–∏ —Å—Ç–∞—Ç—É—Å –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –Ω–µ–≤–µ—Ä–Ω–æ (pending –≤–º–µ—Å—Ç–æ cancelled_by_patient) ‚Äî –∏—Å–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ view/rpc/–º–∞–ø–ø–∏–Ω–≥–∞ —Å—Ç–∞—Ç—É—Å–æ–≤.

10) UI Patient Panel: ‚ÄúMy Bookings‚Äù
–§–∞–π–ª: app/(patient)/patient/bookings/page.tsx
SSR —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –±–µ—Ä—ë—Ç user session —á–µ—Ä–µ–∑ supabase server client
—á–∏—Ç–∞–µ—Ç –∏–∑ v_customer_patients, —Ñ–∏–ª—å—Ç—Ä .eq("patient_id", user.id)
–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
clinic, service, location
–µ—Å–ª–∏ –µ—Å—Ç—å scheduled_at ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –∫–ª–∏–Ω–∏–∫–æ–π –≤—Ä–µ–º—è + –ø–æ–¥–ø–∏—Å—å ‚ÄúScheduled by clinic‚Äù
–∏–Ω–∞—á–µ preferred_date/time
—Å—Ç–∞—Ç—É—Å –±–µ–π–¥–∂–µ–º
—Ü–µ–Ω—ã
booking_method
–æ—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ patient_cancel_booking (server action), —Å –º—è–≥–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ (redirect —Å cancel_error)
–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞:
–ø–∞—Ü–∏–µ–Ω—Ç –æ—Ç–º–µ–Ω—è–µ—Ç ‚Üí —É –ø–∞—Ü–∏–µ–Ω—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è cancelled
—É –∫–ª–∏–Ω–∏–∫–∏ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è cancelled_by_patient (–∏ –±—ã—Ç—å locked –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞)

11) –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏ –∏ TZ
–ë—ã–ª–æ:
–∫–ª–∏–Ω–∏–∫–∞ –≤–∏–¥–∏—Ç –æ–¥–Ω–æ –≤—Ä–µ–º—è, –ø–∞—Ü–∏–µ–Ω—Ç –¥—Ä—É–≥–æ–µ (—Ä–∞–∑–Ω–∏—Ü–∞ –∏–∑-–∑–∞ timezone/locale —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–∞).
–°–¥–µ–ª–∞–Ω–æ:
–ø—Ä–∏–≤–µ–ª–∏ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫ –µ–¥–∏–Ω–æ–º—É –≤–∏–¥—É:
DD.MM.YYYY, HH:mm (–±–µ–∑ —Å–µ–∫—É–Ω–¥)
–ø–æ–∫–∞–∑ –ø–æ timezone –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±—Ä–∞—É–∑–µ—Ä –ø–∞—Ü–∏–µ–Ω—Ç–∞).
–ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –∫–ª–∏–Ω–∏–∫–æ–π ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π timestamp –≤ ISO, –∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ –ª–æ–∫–∞–ª–∏/—Ç–∞–π–º–∑–æ–Ω–µ.

12) –¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: –ª–µ–Ω–¥–∏–Ω–≥ /ru/hair-transplant/lp
–¶–µ–ª—å: —Ä–µ–∫–ª–∞–º–Ω—ã–π –ª–µ–Ω–¥–∏–Ω–≥ –ø–æ–¥ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é –¥–ª—è —É—Å–ª—É–≥–∏ –ø–µ—Ä–µ—Å–∞–¥–∫–∏ –≤–æ–ª–æ—Å –≤ –°—Ç–∞–º–±—É–ª–µ.
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
–°—Ç—Ä–∞–Ω–∏—Ü–∞: app/ru/hair-transplant/lp/page.tsx
–°–µ–∫—Ü–∏–∏ –ª–µ–Ω–¥–∏–Ω–≥–∞:
Hero: –∑–∞–≥–æ–ª–æ–≤–æ–∫/–ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫/3 –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ + —Ä–µ–π—Ç–∏–Ω–≥ 4.8/5
—Å–ø—Ä–∞–≤–∞ –∏–Ω–ª–∞–π–Ω-—Ñ–æ—Ä–º–∞ (–ù–ï –º–æ–¥–∞–ª–∫–∞): LeadInlineForm
Steps: 9 —à–∞–≥–æ–≤ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ —Å –∏–∫–æ–Ω–∫–∞–º–∏ (lucide-react)
Results: –∫–∞—Ä—É—Å–µ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ResultsCarousel
Economy: ‚Äú—Ç–∞–±–ª–∏—á–∫–∞‚Äù —Å–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º –∏ –∏—Ç–æ–≥–æ–≤–æ–π —ç–∫–æ–Ω–æ–º–∏–µ–π
Official: –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ –ª–µ–≥–∞–ª—å–Ω–æ—Å—Ç—å/–≥–∞—Ä–∞–Ω—Ç–∏–∏
Certificates: 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–∏
Why Turkey: 3 –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤
FAQ: –∞–∫–∫–æ—Ä–¥–µ–æ–Ω FaqAccordion + JSON-LD FAQPage
Final CTA: –±–ª–æ–∫ —Å —Ñ–æ—Ä–º–æ–π
SEO:
metadata (title/description/canonical/openGraph/twitter/robots)
FAQ JSON-LD schema.org
–§–æ—Ä–º—ã:
–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –±—ã–ª–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ, –∑–∞—Ç–µ–º –ø–æ–º–µ–Ω—è–ª–∏:
–≤ –ø–µ—Ä–≤–æ–π —Å–µ–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–∫—Ä—ã—Ç–∞ (inline)
CTA-–∫–Ω–æ–ø–∫–∏ (—á–µ—Ä–µ–∑ –æ–¥–Ω—É —Å–µ–∫—Ü–∏—é ‚Äî —Ç.–µ. –≤–Ω—É—Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ–∫—Ü–∏–π, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ–∫—Ü–∏–µ–π) –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π.
–°–¥–µ–ª–∞–ª–∏ –æ–±—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã (—á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ç–∫—É):
LeadForm ‚Äî –æ–±—â–∞—è —Ñ–æ—Ä–º–∞
LeadInlineForm ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º + LeadForm
LeadModalCta ‚Äî –∫–Ω–æ–ø–∫–∞ ‚Üí Dialog ‚Üí LeadForm
–ö–∞—Ä—É—Å–µ–ª—å:
–ø–æ–∫–∞ –±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ —Å–∫—Ä–æ–ª–ª–æ–º –∏ dot-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏.
–Ω—É–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫ –µ–¥–∏–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É (–Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ ~345√ó345) –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å.
–í–∞–∂–Ω–æ –ø–æ layout / header-footer
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â–∏–π RootLayout + AppChrome (Navbar/Footer). –ù–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ header/footer –Ω–µ –Ω—É–∂–Ω—ã.
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± (–±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ layout, —Ç.–∫. root layout –µ–¥–∏–Ω—ã–π):
–≤ components/layout/AppChrome.tsx –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ:
–µ—Å–ª–∏ pathname –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å /ru/hair-transplant/lp ‚Üí —Å–∫—Ä—ã–≤–∞–µ–º Navbar/Footer.
(–°—Ç—Ä–∞–Ω–∏—Ü–∞ not-found.tsx ‚Äî –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç ‚Äú–±–µ–∑ chrome‚Äù, –Ω–æ –æ–Ω–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ–±—ã—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.)
–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ–¥–µ–ª–∞—Ç—å –ø–æ –ª–µ–Ω–¥–∏–Ω–≥—É (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏)
–°–∫—Ä—ã—Ç—å Navbar/Footer —Ç–æ–ª—å–∫–æ –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ —á–µ—Ä–µ–∑ AppChrome (path-based).
CTA —á–µ—Ä–µ–∑ –æ–¥–Ω—É —Å–µ–∫—Ü–∏—é:
–Ω–µ –≤—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏,
–¥–æ–±–∞–≤–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ–∫—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, after Steps, after Economy, after Why Turkey) –Ω–µ–±–æ–ª—å—à—É—é CTA-—Å—Ç—Ä–æ–∫—É/–∫–Ω–æ–ø–∫—É LeadModalCta.
–ö–∞—Ä—É—Å–µ–ª—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –µ–¥–∏–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É:
–Ω–∞ desktop –∫–∞—Ä—Ç–æ—á–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ~345√ó345 (–∫–≤–∞–¥—Ä–∞—Ç),
–Ω–∞ –º–æ–±–∏–ª–∫–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 70‚Äì85vw) –∏ –±–µ–∑ –∫—Ä–∏–≤—ã—Ö –≤—ã—Å–æ—Ç.
–î–æ—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–∑—É–∞–ª–∞:
–∏–∑–±–µ–≥–∞—Ç—å –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã—Ö ‚Äú–ø—Ä–æ—Å—Ç—ã–Ω–µ–π‚Äù —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –º–æ–±–∏–ª–∫–µ,
–∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã/–∏–µ—Ä–∞—Ä—Ö–∏—è, –µ–¥–∏–Ω—ã–µ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞,
–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∏–ª–∏ –≤ —Ä–∞–º–∫–∞—Ö –¥–∏–∑–∞–π–Ω–∞ MedTravel (–±–µ–∑ –ø–æ–ª–æ–º–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Ç–µ–º—ã).
(–ü–æ—Ç–æ–º, –ø–æ–∑–∂–µ) –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã ‚Äî –ø–æ–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

13) –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏/—Ä–∏—Å–∫–∏ –∏–∑ –Ω–µ–¥–∞–≤–Ω–µ–≥–æ
Vercel build –æ—à–∏–±–∫–∞: Can't resolve '@/lib/utils' –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
–†–µ—à–∞–ª–æ—Å—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Ñ–∞–π–ª–∞/–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–∞/–æ—Ç–∫–∞—Ç–æ–º —Å–ø–æ—Ä–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.
HeroUI peer dependency: –≤ –ª–æ–≥–∞—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ tailwindcss@>=4.0.0 –¥–ª—è @heroui/theme.
–ù—É–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∞/–∏–º–ø–æ—Ä—Ç heroUI –Ω–µ –ª–æ–º–∞–ª –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞/—Ç–µ–º—É.
‚Äú—Ü–≤–µ—Ç–∞ –ø–æ –≤—Å–µ–º—É —Å–∞–π—Ç—É —Å–ª–æ–º–∞–ª–∏—Å—å‚Äù ‚Äî —Å–ª—É—á–∞–ª–æ—Å—å –ø–æ—Å–ª–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤ –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã/–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã/—Å—Ç–∏–ª–∏; –æ—Ç–∫–∞—Ç—ã–≤–∞–ª–∏ –æ–±—Ä–∞—Ç–Ω–æ.
–í–∞–∂–Ω–æ: –Ω–µ –º–µ–Ω—è—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã —Ä–∞–¥–∏ –ª–µ–Ω–¥–∏–Ω–≥–∞.

14) –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã/–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã)
Layout/Chrome
app/layout.tsx ‚Äî root layout, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, —Ç–µ–º—ã, AppChrome
components/layout/AppChrome.tsx ‚Äî —É—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ Navbar/Footer
components/layout/Navbar.tsx
components/layout/Footer.tsx
styles/globals.css
Customer (–∫–ª–∏–Ω–∏–∫–∞)
components/customer/PatientsListClient.tsx
app/api/customer/patients/route.ts
app/api/customer/patients/[id]/route.ts
app/api/customer/patients/[id]/schedule/route.ts
app/api/customer/patients/[id]/xray-url/route.ts
app/api/customer/patients/[id]/photo-url/route.ts
Patient
app/(patient)/patient/bookings/page.tsx
RPC: patient_cancel_booking
DB
public.patient_bookings (—Ç–∞–±–ª–∏—Ü–∞)
public.v_customer_patients (view)
RPC:
customer_patients_list
customer_patient_update_status
customer_patient_set_schedule
delete —Ñ—É–Ω–∫—Ü–∏–π
Landing
app/ru/hair-transplant/lp/page.tsx
app/ru/hair-transplant/lp/_components/LeadForm.tsx
app/ru/hair-transplant/lp/_components/LeadInlineForm.tsx
app/ru/hair-transplant/lp/_components/LeadModalCta.tsx
app/ru/hair-transplant/lp/_components/ResultsCarousel.tsx
app/ru/hair-transplant/lp/_components/FaqAccordion.tsx

15) –ù–∞ —á—ë–º –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (preferred vs scheduled) ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç:
–∫–ª–∏–Ω–∏–∫–∞ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –≤—Ä–µ–º—è ‚Üí –ø–∞—Ü–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è.
—Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç –ø—Ä–∏–≤–µ–¥—ë–Ω –≤ –ø–æ—Ä—è–¥–æ–∫, TZ —É—á—Ç—ë–Ω.
–§–∞–π–ª—ã (attachments) ‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç:
–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ URL –ø–æ–ª—É—á–∞—é—Ç —á–µ—Ä–µ–∑ API, –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –º–æ–¥–∞–ª–∫–µ.
–õ–µ–Ω–¥–∏–Ω–≥ ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∞–∫—Ç–∏–≤–Ω—ã–π —ç—Ç–∞–ø:
—É–∂–µ —Å–≤–µ—Ä—Å—Ç–∞–Ω –ø–æ —Å–µ–∫—Ü–∏—è–º, —Ñ–æ—Ä–º—ã –∏ FAQ/JSON-LD –µ—Å—Ç—å.

—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞(–ø—É–±–ª–∏—á–Ω—ã–π, –∑–∞—Ö–æ–¥–∏, —Å–º–æ—Ç—Ä–∏, –∏–∑—É—á–∞–π) - https://github.com/ArtLegends/medtravel-main
–ø—Ä–æ–¥–∞–∫—à–µ–Ω - https://medtravel.me/

–∫–∞–∫ –∑–∞–∫–æ–Ω—á–∏—à—å –∏–∑—É—á–∞—Ç—å, –Ω–∞–ø–∏—à–∏ –ø—Ä–æ—Å—Ç–æ "–Ø –≥–æ—Ç–æ–≤" –∏ –±—É–¥–µ–º –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å.

----------------------- next

–ù–∏–∂–µ ‚Äî –æ—Ç—á—ë—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Ü–µ–ª–∏–∫–æ–º –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –Ω–æ–≤—ã–π —á–∞—Ç. –Ø —Ä–∞–∑–¥–µ–ª–∏–ª –Ω–∞: **(A) –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ MedTravel**, **(B) —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–¥–µ–ª–∞–ª–∏ –≤ –≠–¢–û–ú —á–∞—Ç–µ –ø–æ —à–∞–≥–∞–º**, **(C) —Ç–µ–∫—É—â–∞—è —Ç–æ—á–∫–∞ –∏ —á—Ç–æ –¥–∞–ª—å—à–µ**.

---

# –û—Ç—á—ë—Ç –ø–æ –ø—Ä–æ–µ–∫—Ç—É MedTravel (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)

## 1) –ö—Ä–∞—Ç–∫–æ –æ –ø—Ä–æ–¥—É–∫—Ç–µ –∏ —Ä–æ–ª—è—Ö

**MedTravel.me** ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –º–µ–¥—Ç—É—Ä–∏–∑–º–∞ —Å 4 —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (–ø–æ —Ç–≤–æ–µ–º—É –æ–ø–∏—Å–∞–Ω–∏—é):

1. **–ü–∞—Ü–∏–µ–Ω—Ç (PATIENT)**

* –ú–æ–∂–µ—Ç –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É/–ª–∏–¥ (–ª–µ–Ω–¥–∏–Ω–≥) –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –±—É–∫–∏–Ω–≥ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∫–ª–∏–Ω–∏–∫—É –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞.
* –ò–º–µ–µ—Ç –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ü–∏–µ–Ω—Ç–∞, –≤–∏–¥–∏—Ç –∑–∞–ø–∏—Å–∏/—Å—Ç–∞—Ç—É—Å—ã/–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—É—é –∫–ª–∏–Ω–∏–∫—É, –ø–æ–∑–∂–µ –±—É–¥–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å –∫–ª–∏–Ω–∏–∫—É –≤—Ä—É—á–Ω—É—é/–∞–≤—Ç–æ.

2. **–ö–ª–∏–Ω–∏–∫–∞-–ø–∞—Ä—Ç–Ω—ë—Ä (CUSTOMER)**

* –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è, —Ç—Ä–µ–±—É–µ—Ç **–∞–ø—Ä—É–≤–∞ –∞–¥–º–∏–Ω–æ–º**.
* –ü–æ—Å–ª–µ –∞–ø—Ä—É–≤–∞ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ customer-–ø–∞–Ω–µ–ª–∏ –∏ –≤–∏–¥–∏—Ç –∑–∞–ø–∏—Å–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –≤ `/customer/patients`.
* –ú–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å, –Ω–∞–∑–Ω–∞—á–∞—Ç—å –¥–∞—Ç—É (schedule), —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏.

3. **–ü–∞—Ä—Ç–Ω—ë—Ä-–∞—Ñ—Ñ–∏–ª–µ–π—Ç (PARTNER)**

* –û—Ç–¥–µ–ª—å–Ω–∞—è —Ä–æ–ª—å –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è.
* –¢–µ–ø–µ—Ä—å —Ç–æ–∂–µ —Ç—Ä–µ–±—É–µ—Ç **–∞–ø—Ä—É–≤–∞ –∞–¥–º–∏–Ω–æ–º** (–∫–∞–∫ customer).
* –†–∞–Ω–µ–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ø—É—Ç—å ‚Äú–ª–∏–¥—ã ‚Üí –ø–∞—Ä—Ç–Ω—ë—Ä—É‚Äù, –Ω–æ –ø–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ –ª–∏–¥—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç—å **–∫–ª–∏–Ω–∏–∫–∞–º (customer)**, –∞ –ø–∞—Ä—Ç–Ω—ë—Ä—ã ‚Äî –∫ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ/–∞–Ω–∞–ª–∏—Ç–∏–∫–µ.

4. **–ü–∞—Ä—Ç–Ω—ë—Ä-—Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä**

* –ü–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω. –£—á—Ç–µ–Ω–æ –≤ –±—É–¥—É—â–µ–º –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤.

---

## 2) –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ / –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

* **Next.js App Router** (route handlers, server components + client components)
* **Supabase**: Auth (email/pass + OTP, Google OAuth, —Ç–µ–ø–µ—Ä—å –µ—â—ë Phone provider —á–µ—Ä–µ–∑ Twilio), Postgres, Storage, RLS
* **Postgres SQL**: views + rpc —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–∞–Ω–µ–ª–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä `customer_patients_list`)
* UI: **HeroUI**, TailwindCSS, –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
* Email: **Resend** (—à–∞–±–ª–æ–Ω—ã –≤ `lib/mail/resend.ts`)
* Analytics: **Yandex Metrika** + **GA4 gtag** (CSP —É—á–∏—Ç—ã–≤–∞–µ–º)

---

# (B) –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –≤ —ç—Ç–æ–º —á–∞—Ç–µ ‚Äî –ø–æ —ç—Ç–∞–ø–∞–º

## –≠—Ç–∞–ø 1 ‚Äî Google Analytics / CSP

1. –î–æ–±–∞–≤–∏–ª–∏ GA4 (gtag.js) –≤ `app/layout.tsx` —á–µ—Ä–µ–∑ `next/script`.
2. –í–∫–ª—é—á–∏–ª–∏ —Ä—É—á–Ω—ã–µ page_view —á–µ—Ä–µ–∑ `components/analytics/GAProvider.tsx` (send_page_view: false).
3. –ò—Å–ø—Ä–∞–≤–∏–ª–∏ CSP –≤ `next.config.js`, –¥–æ–±–∞–≤–∏–ª–∏ **—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è `googletagmanager.com`** –≤ `script-src`, –Ω–µ –ª–æ–º–∞—è –æ—Å—Ç–∞–ª—å–Ω–æ–µ.

---

## –≠—Ç–∞–ø 2 ‚Äî –ü–∞—Ä–æ–ª—å –≤ Settings (—É—Å—Ç–∞–Ω–æ–≤–∫–∞/—Å–º–µ–Ω–∞)

* –í `app/(user)/settings/page.tsx` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–º–µ–Ω–∞/—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ `supabase.auth.updateUser({ password })`.
* –î–æ–±–∞–≤–ª–µ–Ω UX-—Ö–∏–Ω—Ç `?password=1` –ø–æ—Å–ª–µ magic link (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å).
* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏/submit (–≤ –∏—Ç–æ–≥–µ ‚Äú–∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ‚Äù).

---

## –≠—Ç–∞–ø 3 ‚Äî –ü–µ—Ä–µ–Ω–æ—Å –ª–æ–≥–∏–∫–∏ ‚Äú–ª–∏–¥—ã ‚Üí partner‚Äù –Ω–∞ ‚Äú–ª–∏–¥—ã ‚Üí customer/patients‚Äù

–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –±—ã–ª –ø—É—Ç—å:

* –ª–∏–¥ —Å –ª–µ–Ω–¥–∏–Ω–≥–∞ ‚Üí —Ç–∞–±–ª–∏—Ü–∞ `partner_leads` ‚Üí –∞–¥–º–∏–Ω –Ω–∞–∑–Ω–∞—á–∞–ª ‚Üí `/partner/leads` + email –ø–∞—Ä—Ç–Ω—ë—Ä—É.

–í—ã—è—Å–Ω–∏–ª–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É:

* –ª–∏–¥—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞–¥–∞—Ç—å **–∫ –∫–ª–∏–Ω–∏–∫–µ (CUSTOMER)** –≤ `/customer/patients`.
* –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º (affiliate) –ª–∏–¥—ã –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –≤—ã–¥–∞—ë–º, `/partner/leads` —É–±—Ä–∞–ª–∏ –∏–∑ UI.

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

1. `/partner/leads` —É–±—Ä–∞–Ω –∏–∑ sidebar –ø–∞—Ä—Ç–Ω—ë—Ä–∞ (—Ñ–∞–π–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω `_old`).
2. –í –∞–¥–º–∏–Ω—Å–∫–æ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ª–∏–¥–æ–≤ –º—ã **–æ—Å—Ç–∞–≤–∏–ª–∏ —Ç–∞–±–ª–∏—Ü—É `partner_leads`** (–Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ —Ç—Ä–æ–≥–∞–µ–º), –Ω–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –¥–µ–ª–∞–µ–º –Ω–∞ customer (clinic user).
3. –ü—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –ª–∏–¥ **—Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å** –≤ `patient_bookings` (—á—Ç–æ–±—ã –ø–æ—è–≤–∏–ª–æ—Å—å —É –∫–ª–∏–Ω–∏–∫–∏ –≤ `/customer/patients`) —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

   * `service_id = 803` (Hair Transplant)
   * `booking_method = "automatic"` (–º–∞—Ä–∫–µ—Ä ‚Äú–ª–µ–Ω–¥–∏–Ω–≥/–ª–∏–¥‚Äù)
   * `notes` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Ä–∫–µ—Ä `[lead:<uuid>]` –¥–ª—è —Å–≤—è–∑–∫–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –ª–∏–¥–∞
4. –ö–ª–∏–Ω–∏–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ (—á–µ—Ä–µ–∑ Resend).

---

## –≠—Ç–∞–ø 4 ‚Äî Customer –ø–∞—Ü–∏–µ–Ω—Ç—ã: –±–µ–π–¥–∂ ‚ÄúLanding lead‚Äù + –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–∞–∫ –≤ –∞–¥–º–∏–Ω–∫–µ

### –ë–∞–∑–∞:

* –¢–∞–±–ª–∏—Ü–∞ –∑–∞–ø–∏—Å–µ–π: `patient_bookings`
* View –¥–ª—è customer: `v_customer_patients`
* RPC —Å–ø–∏—Å–æ–∫: `customer_patients_list` (—á–∏—Ç–∞–µ—Ç –∏–∑ view, —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É/–¥–∞—Ç–∞–º)

### –ß—Ç–æ —É–ª—É—á—à–∏–ª–∏:

1. –î–æ–±–∞–≤–∏–ª–∏ –≤ –≤—ã–±–æ—Ä–∫—É `booking_method` –≤ RPC/view, —á—Ç–æ–±—ã –Ω–∞ UI —Ä–∞–∑–ª–∏—á–∞—Ç—å:

   * manual = –ø–∞—Ü–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–ª –∑–∞–ø–∏—Å—å —Å–∞–º
   * automatic = –ª–∏–¥ —Å –ª–µ–Ω–¥–∏–Ω–≥–∞
2. –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –æ—à–∏–±–∫—É `return type mismatch` –≤ `customer_patients_list` (–≤–∞–∂–Ω–æ: –¥–æ–±–∞–≤–ª—è—è –ø–æ–ª–µ –≤ select, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ RETURNS TABLE –≤ –Ω—É–∂–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏).
3. –ë–µ–π–¥–∂ `Landing lead` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:

   * `booking_method === "automatic"`
   * * —É–ª—É—á—à–µ–Ω–æ —á–µ—Ä–µ–∑ `lead_id` (–≤ view –¥–æ–±–∞–≤–∏–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ `lead_id` —á–µ—Ä–µ–∑ regexp –Ω–∞ `[lead:uuid]`) —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π.
4. –ö–Ω–æ–ø–∫–∞ `View attachment`:

   * —Å—Ç–∞–ª–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π, –µ—Å–ª–∏ –≤–ª–æ–∂–µ–Ω–∏–π —Ä–µ–∞–ª—å–Ω–æ –Ω–µ—Ç
   * –¥–æ–±–∞–≤–∏–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä **–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫** (–∫–∞–∫ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏) —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª–∫—É —Å –ø—Ä–µ–≤—å—é/thumbnail
5. –î–æ–±–∞–≤–ª–µ–Ω endpoint:

   * `app/api/customer/patients/[id]/lead-images` ‚Äî –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç `lead_id` –∏–∑ notes/auto_when, –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –∏–∑ storage bucket `partner-leads`.
6. –û–±—ã—á–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞ (xray/photo):

   * `photo-url` –∏ `xray-url` –∏—Å–ø–æ–ª—å–∑—É—é—Ç service role –¥–ª—è signed URL –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç clinic_id —á–µ—Ä–µ–∑ `customer_current_clinic_id`.

---

## –≠—Ç–∞–ø 5 ‚Äî –ü–∞—Ü–∏–µ–Ω—Ç: –ø–æ–∫–∞–∑ –∑–∞–ø–∏—Å–∏ –ø–æ—Å–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫–ª–∏–Ω–∏–∫–µ

–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: –∫–æ–≥–¥–∞ –ª–∏–¥ –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –∫–ª–∏–Ω–∏–∫–µ, —É –ø–∞—Ü–∏–µ–Ω—Ç–∞ –≤ `/patient/bookings` –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å—å.

–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ —ç—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ:

* –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `patient_bookings` —Å `patient_id`.
* `/patient/bookings` —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ (—á–µ—Ä–µ–∑ `v_customer_patients` —Å join clinic/services) –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

  * clinic, service, location
  * scheduled_at –µ—Å–ª–∏ –∫–ª–∏–Ω–∏–∫–∞ –Ω–∞–∑–Ω–∞—á–∏–ª–∞
  * –∏–Ω–∞—á–µ preferred_date/time –ø—É—Å—Ç–æ/‚Äî (–¥–ª—è –ª–∏–¥–æ–≤)
  * method –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (manual/automatic)

---

## –≠—Ç–∞–ø 6 ‚Äî Approval-gating –¥–ª—è Partner (–∫–∞–∫ –¥–ª—è Customer)

–ë—ã–ª–æ: customer —Ç—Ä–µ–±—É–µ—Ç –∞–ø—Ä—É–≤–∞ –∞–¥–º–∏–Ω–∞, partner ‚Äî –Ω–µ—Ç.

–°–¥–µ–ª–∞–ª–∏:

1. –°–æ–∑–¥–∞–ª–∏ `partner_registration_requests` (DDL –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω).
2. –î–æ–±–∞–≤–∏–ª–∏ gating –Ω–∞:

   * Google OAuth flow —á–µ—Ä–µ–∑ `app/auth/callback/route.ts`: –µ—Å–ª–∏ —Ä–æ–ª—å PARTNER –∏ –∑–∞—è–≤–∫–∞ –Ω–µ approved ‚Üí –¥–µ—Ä–∂–∏–º guest, —Å–æ–∑–¥–∞—ë–º pending request, —Ä–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–µ–º, —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/auth/login?as=PARTNER&pending=1`.
   * Email/password sign-in: –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ `user_roles.partner`; –µ—Å–ª–∏ –Ω–µ—Ç ‚Üí —á–∏—Ç–∞–µ–º —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏, signOut, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ.
3. –î–æ—Ä–∞–±–æ—Ç–∞–ª–∏ UX: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –æ–∫–Ω–µ –ª–æ–≥–∏–Ω–∞ (–∫–∞–∫ —É customer).
4. –î–ª—è email+password signup: –ø–æ–ø—Ä–∞–≤–∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏/–ø–æ—Ç–æ–∫ OTP —Ç–∞–∫, —á—Ç–æ–±—ã partner —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞–ª –∫–∞–∫ customer.
5. –ü–æ–ª–∏—Ç–∏–∫–∏ RLS –¥–ª—è customer requests –¥–æ–±–∞–≤–ª–µ–Ω—ã (–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è partner requests —Ç–æ–∂–µ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–∑–∂–µ).

---

## –≠—Ç–∞–ø 7 ‚Äî –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ ‚ÄúSettings‚Äù –∏ –±—É–¥—É—â–µ–≥–æ ‚ÄúProfile‚Äù

–ü–ª–∞–Ω —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω:

* –í navbar —Å–µ–π—á–∞—Å –æ–¥–∏–Ω –ø—É–Ω–∫—Ç `/settings`.
* –ù—É–∂–Ω–æ:

  * –°–æ–∑–¥–∞—Ç—å `/profile` –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—É–¥–∞ –±–ª–æ–∫–∏ **Account** + **Contact & preferences**.
  * –í `/settings` –æ—Å—Ç–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å + –¥–æ–±–∞–≤–∏—Ç—å 2‚Äì3 –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äúbest practice‚Äù, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø—É—Å—Ç–æ.
  * –û–±–Ω–æ–≤–∏—Ç—å Navbar dropdown: –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ ‚ÄúSettings‚Äù –±—É–¥–µ—Ç ‚ÄúProfile‚Äù –∏ ‚ÄúSettings‚Äù.

(–≠—Ç–æ—Ç —ç—Ç–∞–ø –µ—â—ë **–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω**, —Ç–æ–ª—å–∫–æ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω.)

---

## –≠—Ç–∞–ø 8 ‚Äî Email –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω –≤ –ª–µ–Ω–¥–∏–Ω–≥-—Ñ–æ—Ä–º–µ + –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Phone-auth

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

1. –í `LeadForm.tsx` email —Å–¥–µ–ª–∞–Ω **–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º**:

   * `canSubmit` –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç `fullName` + `phone`
   * email –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
2. –í `partner_leads` email —Ç–µ–ø–µ—Ä—å **NULLABLE** (DDL: `email text null`).
3. `app/api/leads/partner/route.ts` –∏–∑–º–µ–Ω—ë–Ω:

   * –µ—Å–ª–∏ email –µ—Å—Ç—å ‚Üí —Å–æ–∑–¥–∞—ë–º/ensure patient –∏ —à–ª—ë–º magic link –Ω–∞ email (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
   * –µ—Å–ª–∏ email –Ω–µ—Ç ‚Üí **—Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—ë–º lead**, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º `emailSent: false`
4. –ü–æ–¥–∫–ª—é—á–∏–ª–∏ Supabase **Phone provider —á–µ—Ä–µ–∑ Twilio** (SID/token/service SID).
5. –°–æ–∑–¥–∞–Ω—ã:

   * `components/auth/PhoneAuthForm.tsx` (–¥–ª—è –æ–±—â–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–º —ç–∫—Ä–∞–Ω–æ–º/—Ä–µ–∂–∏–º–æ–º)
   * `app/api/patient/lead/attach/route.ts` ‚Äî endpoint –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ `lead_id` –∫ patient (—á—Ç–æ–±—ã –∞–¥–º–∏–Ω –º–æ–≥ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∫–ª–∏–Ω–∏–∫–µ –¥–∞–∂–µ –µ—Å–ª–∏ email –Ω–µ —É–∫–∞–∑–∞–Ω)

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

* –í `UnifiedAuthModal.tsx` –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –±—ã–ª–∞ –æ—à–∏–±–∫–∞: `setPatientAuthMode("email")` –±—ã–ª–æ –≤—ã–∑–≤–∞–Ω–æ **–≤–Ω–µ useEffect** (–ª–æ–º–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä). –ò—Å–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –≤ —Ö–æ–¥–µ –ø—Ä–∞–≤–æ–∫.
* –í `LeadForm.tsx` —É —Ç–µ–±—è –±—ã–ª–∏ TS –æ—à–∏–±–∫–∏ ‚ÄúCannot find name phone/fullName‚Äù ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ `useMemo/useState` –∏ `supabase` –±—ã–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω—ã **–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**. –≠—Ç–æ –Ω–∞–¥–æ –¥–µ—Ä–∂–∞—Ç—å **–≤–Ω—É—Ç—Ä–∏** React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

---

# (C) –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —á—Ç–æ –¥–µ–ª–∞–µ–º —Å–µ–π—á–∞—Å

## –¢–µ–∫—É—â–∞—è —Ç–æ—á–∫–∞ (–Ω–∞ –º–æ–º–µ–Ω—Ç —Å–º–µ–Ω—ã —á–∞—Ç–∞)

1. –§–ª–æ—É –ª–µ–Ω–¥–∏–Ω–≥–∞ –ø–æ email –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π:

* lead ‚Üí admin panel ‚Üí assign to clinic ‚Üí –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ `/customer/patients` + –ø–∏—Å—å–º–æ –∫–ª–∏–Ω–∏–∫–µ
* –ø–æ—è–≤–ª—è–µ—Ç—Å—è —É –ø–∞—Ü–∏–µ–Ω—Ç–∞ –≤ `/patient/bookings` –ø–æ—Å–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

2. Email —Ç–µ–ø–µ—Ä—å –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω –≤ LeadForm:

* lead —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –±–µ–∑ email
* –Ω–æ ‚Äú—Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–±–∏–Ω–µ—Ç–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –±–µ–∑ email‚Äù –ø–æ–∫–∞ –¥–µ–ª–∞–µ–º —á–µ—Ä–µ–∑ phone-auth –∏ attach lead_id

3. Phone-auth (PATIENT) –Ω–∞—á–∞—Ç:

* Supabase Phone provider –ø–æ–¥–∫–ª—é—á–µ–Ω (Twilio)
* –°–æ–∑–¥–∞–Ω—ã PhoneAuthForm –∏ endpoint attach lead.

## –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å/–¥–æ–≤–µ—Å—Ç–∏ –¥–æ –∏–¥–µ–∞–ª–∞ (—Å–ª–µ–¥—É—é—â–∏–π —á–∞—Ç)

### 1) Phone OTP flow –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ ‚Äî –¥–æ–≤–µ—Å—Ç–∏ UX/–ª–æ–≥–∏–∫—É

* –í `LeadForm.tsx`:

  * supabase client + otp state –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  * –ª–æ–≥–∏–∫–∞: –ø–æ—Å–ª–µ submit –±–µ–∑ email ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º SMS OTP –±–ª–æ–∫, –æ—Ç–ø—Ä–∞–≤–∫–∞ OTP, verify OTP
  * –ø–æ—Å–ª–µ verify: –¥–µ–ª–∞–µ–º `/api/patient/lead/attach` (–ø—Ä–∏–≤—è–∑–∞—Ç—å lead –∫ user), –∑–∞—Ç–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç –≤ `/patient`
* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `mt_lead_id` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∏—à–µ—Ç—Å—è/—á–∏—Å—Ç–∏—Ç—Å—è.
* –ü—Ä–∏–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä –∫ E.164 (–≤–∞–ª–∏–¥–∞—Ü–∏—è/–ø–æ–¥—Å–∫–∞–∑–∫–∞).

### 2) UnifiedAuthModal ‚Äî —Ä–µ–∂–∏–º ‚ÄúPatient: Email/Phone‚Äù

* –°–µ–π—á–∞—Å –¥–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å, –Ω–æ –Ω—É–∂–Ω–æ:

  * —Ä–µ–∞–ª—å–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å **PhoneAuthForm –≤–º–µ—Å—Ç–æ CredentialsForm**, –∫–æ–≥–¥–∞ –≤—ã–±—Ä–∞–Ω phone
  * –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å Google OAuth, –µ—Å–ª–∏ phone mode (–∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å, –Ω–æ –ª–æ–≥–∏—á–Ω–æ)
  * –Ω–µ –ª–æ–º–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏

### 3) Gating/—Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É

* –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ: —Å–æ–∑–¥–∞—ë–º –ª–∏ patient –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º verifyOtp –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É (–æ–±—ã—á–Ω–æ Supabase —Å–æ–∑–¥–∞—ë—Ç user –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
* –ü–æ—Å–ª–µ verifyOtp:

  * ensure `profiles.role=patient`, `user_roles.patient`
  * –∑–∞–ø–∏—Å–∞—Ç—å `profiles.phone`, `user_metadata.phone`, –∏–º—è –∏–∑ —Ñ–æ—Ä–º—ã (–µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—ë–º)
  * –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å lead —á–µ—Ä–µ–∑ attach endpoint

### 4) –ê–¥–º–∏–Ω assign: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ lead –±–µ–∑ email (—É–∂–µ –µ—Å—Ç—å)

* –°–µ–π—á–∞—Å `assign` –∏—â–µ—Ç patient_id:

  * –ª–∏–±–æ `before.patient_id`, –ª–∏–±–æ —á–µ—Ä–µ–∑ email
  * –∏–Ω–∞—á–µ 400
* –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `partner_leads` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç `patient_id` (–µ—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–ª–∏ –∫–æ–ª–æ–Ω–∫—É), –∏ —á—Ç–æ attach endpoint –µ—ë –∑–∞–ø–æ–ª–Ω—è–µ—Ç.
* –î–æ—Ä–∞–±–æ—Ç–∫–∞ ‚Äúduplicate check‚Äù (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ): `.maybeSingle()` –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `.limit(1)` —á—Ç–æ–±—ã –Ω–µ —É–ø–∞—Å—Ç—å –ø—Ä–∏ –¥—É–±–ª—è—Ö.

### 5) –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ Settings/Profile (–æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞)

* –°–æ–∑–¥–∞—Ç—å `/profile`
* –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ Account + Contact —Ç—É–¥–∞
* `/settings` –æ—Å—Ç–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å + –¥–æ–±–∞–≤–∏—Ç—å 2‚Äì3 –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: language/timezone –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –≤ profile, –∞ –≤ settings –¥–æ–±–∞–≤–∏—Ç—å security/notifications/marketing –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ ‚Äî –±–µ–∑ –ë–î –º–∏–≥—Ä–∞—Ü–∏–π –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ user_metadata)

---

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã/—Ç–æ—á–∫–∏, –∫ –∫–æ—Ç–æ—Ä—ã–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è

* `app/ru/hair-transplant/lp/_components/LeadForm.tsx` ‚Äî —Ñ–æ—Ä–º–∞ –ª–∏–¥–∞, email optional, sms otp –±–ª–æ–∫
* `app/api/leads/partner/route.ts` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ lead + email flow, –±–µ–∑ email –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ lead
* `app/api/patient/lead/attach/route.ts` ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ lead ‚Üí patient user
* `components/auth/UnifiedAuthModal.tsx` ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å Patient Email/Phone –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –Ω—É–∂–Ω–æ–π —Ñ–æ—Ä–º—ã
* `components/auth/PhoneAuthForm.tsx` ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É (PATIENT only)
* `app/auth/callback/route.ts` ‚Äî gating customer/partner
* `customer_patients_list` + `v_customer_patients` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –¥–ª—è customer/—á–∞—Å—Ç–∏—á–Ω–æ patient bookings
* `app/api/admin/partner-leads/assign/route.ts` ‚Äî assign lead ‚Üí clinic + booking + email notify

---
